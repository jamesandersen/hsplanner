webpackJsonp([1],[function(t,e,n){n(8),n(9),t.exports=n(11)},,,,,,,,function(t,e,n){t.exports=n.p+"index.html"},function(){"use strict";!function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;r>i;i++)if(e=n[i],t.call(o,e,i,n))return e;return void 0})}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;r>i;i++)if(e=n[i],t.call(o,e,i,n))return i;return-1})}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}})}()},,function(t,e,n){(function(t){n(17),n(18),n(19),n(20);!function(){"use strict";var e=t.module("hsp",["ngRoute","ngAnimate","ngMaterial","ngMdIcons","hsp.common","hsp.auth","hsp.navigation","hsp.schedule"]);t.module("hsp.auth").constant("CLIENT_ID","<!-- @secret client_id -->"),t.module("hsp.common").constant("BASE_URL","https://home-school.azurewebsites.net"),e.config(["$locationProvider","$routeProvider",function(t,e){t.html5Mode(!0),e.when("/",{templateUrl:"components/schedule/schedule.html",controller:"ScheduleCtrl as schedule",resolve:{token:["hsAuthService",function(t){return t.afterLogin()}]}}).when("/profile",{templateUrl:"components/auth/profile.html",controller:"ProfileCtrl"}).when("/event-detail",{templateUrl:"components/schedule/event-detail.html",controller:"EventDetailCtrl"}).when("/login",{templateUrl:"components/auth/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/"})}]),e.config(["$httpProvider",function(t){t.interceptors.push("calendarHttpInterceptor")}]),e.config(["$mdThemingProvider",function(t){t.theme("default")}]),e.run(["hsAuthService","$location","$log",function(t,e,n){t.loadGoogleAPI().then(function(){t.afterLogin().then(function(){},function(t){n.warn("not signed in at startup: "+t),e.url("/login?dst="+encodeURIComponent(e.url()))})},function(t){n.warn("google api not loaded: "+t)})}])}()}).call(e,n(12))},,,,,,function(t,e,n){(function(t){"use strict";t.module("hsp.common",[]),t.module("hsp.common").constant("MathUtil",n(33)),t.module("hsp.common").constant("Util",n(34)),t.module("hsp.common").constant("Events",n(35))}).call(e,n(12))},function(t,e,n){(function(t){"use strict";n(31);t.module("hsp.auth",["ngResource","ngMaterial"]);t.module("hsp.auth").constant("authEvents",{AUTHENTICATION_CHANGE:"AUTHENTICATION_CHANGE"}),t.module("hsp.auth").factory("hsAuthService",n(36)),t.module("hsp.auth").controller("HeaderCtrl",n(37)),t.module("hsp.auth").controller("LoginCtrl",n(38)),t.module("hsp.auth").controller("ProfileCtrl",n(39)),t.module("hsp.auth").factory("Profile",n(40))}).call(e,n(12))},function(t,e,n){(function(t){"use strict";t.module("hsp.navigation",["ngResource","ngMaterial","hsp.auth"]),t.module("hsp.navigation").controller("SideNavCtrl",n(46))}).call(e,n(12))},function(t,e,n){(function(t){"use strict";var e=function(t){return t&&t.__esModule?t:{"default":t}};n(32);var r=e(n(41));t.module("hsp.schedule",["hsp.auth"]),t.module("hsp.schedule").controller("EventDetailCtrl",n(42)),t.module("hsp.schedule").constant("CALENDAR_BASE_URI",r.BASE_URI),t.module("hsp.schedule").factory("hsCalendarService",r.hsCalendarService),t.module("hsp.schedule").factory("calendarHttpInterceptor",r.calendarHttpInterceptor),t.module("hsp.schedule").filter("hasEvents",n(43)),t.module("hsp.schedule").controller("ScheduleCtrl",n(44)),t.module("hsp.schedule").factory("ScheduleModel",n(45))}).call(e,n(12))},,,,,,,,,,,function(t,e,n){function r(t){return n(o(t))}function o(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./login.html":47,"./profile.html":48};r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=31},function(t,e,n){function r(t){return n(o(t))}function o(t){return i[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var i={"./event-detail.html":49,"./schedule.html":50};r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=32},function(t){"use strict";t.exports={ceiling:function(t,e){return Math.ceil(t/e)*e},floor:function(t,e){return Math.floor(t/e)*e}}},function(t,e,n){(function(e){"use strict";t.exports=function(){return{safeRead:function(t,n){var r=n.split("."),o=t,i=0;for(i=0;i<r.length;i++){if(e.isUndefined(o)||null===o||!o.hasOwnProperty(r[i]))return void 0;o=o[r[i]]}return o},safeSet:function(t,n,r){if(e.isObject(t)){var o=n.split("."),i=t,a=0;for(a=0;a<o.length;a++){if(!(a<o.length-1))return void(i[o[a]]=r);if(e.isUndefined(i[o[a]]))i[o[a]]={};else if(!e.isObject(i[o[a]]))throw"Cannot set on non-object path segment: "+o[a];i=i[o[a]]}}}}}()}).call(e,n(12))},function(t){"use strict";t.exports=function(){return{CHANGE_DAY:"CHANGE_DAY"}}()},function(t){"use strict";t.exports=function(){return["$window","$document","$location","$rootScope","$q","$log","$http","$mdDialog","CLIENT_ID","authEvents","Profile",function(t,e,n,r,o,i,a,c,s,l,d){function u(){i.info("google plus API loaded"),_=!0,delete t.onAPILoad,w.resolve(!0)}function h(t){var e=!1;t&&!E?(E=!0,e=!0):!t&&E&&(E=!1,e=!0),e&&r.$broadcast(l.AUTHENTICATION_CHANGE,E)}function m(t){delete t["g-oauth-window"],i.debug("google plus API auth callback: "+JSON.stringify(t)),t.status.signed_in?(H=new Date,H.setMilliseconds(H.getMilliseconds()+t.expires_in),i.info("successful login; access token expires at "+H.toLocaleTimeString()),a.get("https://www.googleapis.com/plus/v1/people/me",{headers:{Authorization:"Bearer "+t.access_token}}).success(function(e){y=d.get({userId:e.id},function(n){p(!0,t,e,n)},function(n){404==n.status?c.show({templateUrl:"components/auth/profile.html",controller:"ProfileCtrl",locals:{employee:"User Name"}}).then(function(n){p(!0,t,e,n)},function(){p(!1,t,e)}):p(!1,t,e)})}).error(function(e){i.error("Error getting profile information"),p(!1,t,e)}),V&&(V.resolve(b),V=null)):(i.error("authentication error: "+t.error),p(!1,t),V&&(V.reject(t.error),V=null))}function p(t,e,n,r){b=e.access_token,z=n,y=r,A&&(t?A.resolve(b):A.reject(e?e.error:"failed to gather login data"),A=null),h(t)}function f(){t.onAPILoad=u,t.onAuthResult=m;var n=e[0].createElement("script"),r=e[0].getElementsByTagName("script")[0];return n.type="text/javascript",n.async=!0,n.setAttribute("parsetags","explicit"),n.src="https://apis.google.com/js/client:plusone.js?onload=onAPILoad",r.parentNode.insertBefore(n,r),w=o.defer(),V=o.defer(),w.promise}function v(){_&&gapi.auth.signIn(C)}function g(){return b?o.when(b):w.promise.then(function(){return A||(A=o.defer()),A.promise},function(t){return o.reject(t)})}function M(){_&&(gapi.auth.signOut(),b=H=null,n.path("/login"))}function $(){return b&&H>new Date?o.when(b):(b=H=null,V?V.promise:o.reject("no token available, please login"))}var b=null,z=null,y=null,E=!1,H=null,_=!1,C={clientid:s,cookiepolicy:"single_host_origin",callback:"onAuthResult",scope:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/calendar"},w=null,V=null,A=null;return{login:v,afterLogin:g,logout:M,loadGoogleAPI:f,getToken:$,getProfile:function(){return z},getUserData:function(){return y}}}]}()},function(t){"use strict";t.exports=function(){return["$scope","$rootScope","$log","$mdSidenav","ScheduleModel","Events","hsAuthService","authEvents",function(t,e,n,r,o,i,a,c){var s="MMMM Do";t.currentDay=o.getStart().format(s),t.signed_in=!1,t.$on(c.AUTHENTICATION_CHANGE,function(e,n){t.signed_in=n,t.profile=a.getProfile(),t.profileImgSrc=t.profile?t.profile.image.url.replace(/sz=\d+/,"sz=36"):null}),t.logout=a.logout,t.toggleNav=function(){r("left").toggle()},t.changeDay=function(n){e.$broadcast(i.CHANGE_DAY,n),t.currentDay=o.getStart().format(s)}}]}()},function(t){"use strict";t.exports=function(){return["$scope","$location","$log","hsAuthService",function(t,e,n,r){function o(){var t=e.search();e.url(t.hasOwnProperty("dst")?decodeURIComponent(t.dst):"/")}function i(t){n.error("login failed: "+t),r.afterLogin().then(o,i)}r.loadGoogleAPI().then(function(){gapi.signin.render("google-login"),r.afterLogin().then(o,i)},function(){n.error("Google API not loaded")})}]}()},function(t){"use strict";t.exports=function(){return["$scope","$log","$mdDialog","hsAuthService",function(t,e,n){t.getData=function(){e.log("get data")},t.closeDialog=function(){var t={id:"112678812700708466620",name:"Ellaroo",calendarIDs:["jander.me_vhfj574k3cb837tgqe6vrv6e0g@group.calendar.google.com"],subjects:[{id:"abc",summary:"Spanish",bgcolor:"#33691e"},{id:"def",summary:"Writing",bgcolor:"#ff5722"},{id:"ghi",summary:"History",bgcolor:"#004d40"},{id:"jkl",summary:"Math",bgcolor:"#0091ea"}]};n.hide(t)}}]}()},function(t){"use strict";t.exports=function(){return["$resource","BASE_URL",function(t,e){return t(e+"/profiles/:userId",{userId:"@userId"},{charge:{method:"POST",params:{charge:!0}}})}]}()},function(t,e,n){(function(t,n){"use strict";var r="https://www.googleapis.com/calendar/v3";e.BASE_URI=r;var o=["$http","$q","$log","hsAuthService","CALENDAR_BASE_URI",function(e,r,o,i,a){function c(){return e.get(a+"/users/me/calendarList").success(function(){}).error(function(){}).then(function(t){return t.data},function(t){return r.reject(t)})}function s(o,i,c){return e.get(a+"/calendars/"+o+"/events",{params:{timeMin:i||t().startOf("day").format(),timeMax:c||t().endOf("day").format(),singleEvents:!0}}).success(function(t){n.forEach(t.items,function(t){t.calendarId=o,m[t.id]=t}),t.calendarId=o}).error(function(){}).then(function(t){return t.data},function(t){return r.reject(t)})}function l(t){return n.isUndefined(t)?null:void 0!==m[t]?m[t]:null}function d(t,n){return e({method:"GET",url:a+"/calendars/"+n+"/events/"+t}).then(function(t){var e=t.data;return e.calendarId=n,m[e.id]=e,e},function(t){return o.error(t),r.reject(t)})}function u(t,n,i){return e({method:"GET",url:a+"/calendars/"+t.calendarId+"/events/"+t.id+"/instances",params:{timeMin:n.format(),timeMax:i.format(),maxResults:1}}).then(function(e){return e.data.items.length?(e.data.items[0].calendarId=t.calendarId,e.data.items[0]):r.reject("No event instances returned")},function(t){return o.error(t),r.reject(t)})}function h(t,o,i,c,s){var l,h=t;if(n.isString(h)){if(void 0===m[h])return r.reject("Cached event with id "+h+" not found");h=m[h]}return l=r.when(h),h.recurrence&&!i?l=u(h,c,s):h.recurringEventId&&i&&(l=d(h.recurringEventId,h.calendarId)),l.then(function(t){return l=t,e({url:a+"/calendars/"+t.calendarId+"/events/"+t.id,method:"PATCH",headers:{"If-Match":t.etag},data:o}).success(function(e){n.extend(l,e),void 0!==m[t.id]&&(m[t.id]=t)}).then(function(){return l},function(t){return r.reject(t)})})}var m={};return{getCalendarList:c,getEventList:s,getEvent:l,patchEvent:h}}];e.hsCalendarService=o;var i=["$injector","CALENDAR_BASE_URI","$log","$q",function(t,e,r,o){var i;return{request:function(a){return i||(i=t.get("hsAuthService")),a.url.startsWith(e)?i.getToken().then(function(t){return n.extend(a.headers,{Authorization:"Bearer "+t}),a},function(t){return r.error("Error getting token: "+t),o.reject(t)}):a}}}];e.calendarHttpInterceptor=i,Object.defineProperty(e,"__esModule",{value:!0})}).call(e,n(10),n(12))},function(t,e,n){(function(e){"use strict";t.exports=function(){return["$scope","$location","$q","$mdDialog","ScheduleModel","hsAuthService","hsCalendarService","Util",function(t,n,r,o,i,a,c,s){function l(t){var n=c.getEvent(t.resource.recurringEventId),r=s.safeRead(n||t.resource,"extendedProperties.private.subjectId");return e.isDefined(r)&&(t.subject=u.subjects.find(function(t){return t.id===r})),t}function d(t,e){null!==m&&t.indexOf("subjectId")>=0?(s.safeSet(m,t,e),f=!0):(s.safeSet(h,t,e),p=!0)}var u,h={extendedProperties:{"private":{}}},m=null,p=!1,f=!1;a.afterLogin().then(function(){u=a.getUserData(),t.subjects=u.subjects,t.evt=l(i.getActiveEventViewState()),t.evt.resource.recurringEventId&&(m=e.copy(h))}),t.onSubjectChange=function(){d("extendedProperties.private.subjectId",t.evt.subject?t.evt.subject.id:null)},t.onSummaryChange=function(){d("summary",t.evt.resource.summary)},t.onDescriptionChange=function(){d("description",t.evt.resource.description)},t.toggleCompletion=i.toggleCompletion.apply(null,[t.evt]),t.ok=function(){var e=r.when(!1),o=[],a=t.evt;(p||f)&&t.evtForm.$valid&&(p&&o.push(i.patchEvent(a,h,!1)),f&&o.push(i.patchEvent(a,m,!0)),e=r.all(o)),e.then(function(){n.url("/")})},t.cancel=function(){n.url("/")}}]}()}).call(e,n(12))},function(t){"use strict";t.exports=function(){return function(t){return t.suppressEvents?t.filter(function(t){return t.isTimeAxis}):t}}},function(t,e,n){(function(e,n){"use strict";t.exports=function(){return["$scope","$log","$q","$timeout","$location","$mdDialog","Events","ScheduleModel","Profile","Util","MathUtil","hsAuthService","hsCalendarService",function(t,r,o,i,a,c,s,l,d,u,h,m){function p(r){var o=1439,i=0,a=0,c=15,s=25,d=e().startOf("day"),u=t.studentEventLists.slice(0),p=u.find(function(t){return t.isTimeAxis});for(p||(p={isTimeAxis:!0,student:{}},u.unshift(p)),p.summary=l.getStart().format("dddd"),p.student.name=l.getStart().format("M/D"),n.forEach(r,function(t,e){var r=u.find(function(t){return t.student.userId===e});if(!r){var a=m.getUserData(),c=a.students?a.students.find(function(t){return t.userId===e}):a;u.push({student:c,events:[]})}n.forEach(t,function(t){o=Math.min(o,t.startMinutes),i=Math.max(i,t.endMinutes)})}),o=h.floor(o,4*c),i=h.ceiling(i,4*c),t.scheduleTotalBlocks=Math.round(i-o)/c*s+"px",i>o?(f=o,v=i):(o=f,i=v),n.forEach(u,function(t){t.isTimeAxis||(t.events=[],n.forEach(r[t.student.userId],function(e){e.blockOffset=Math.round(h.floor(e.startMinutes-o,c)/c)*s+"px",e.duration=h.floor(e.endMinutes-e.startMinutes,c)/c*s+"px",o=Math.min(o,e.startMinutes),i=Math.max(i,e.endMinutes),t.events.push(e)}))}),d.minutes(o),p.events=[];i>o;)p.events.push({duration:4*s+"px",blockOffset:a*s+"px",resource:{summary:d.format("ha")}}),a+=4,o+=4*c,d.add(4*c,"minutes");return u}var f=480,v=1020;this.taskMode=!0,t.login=m.login,t.animateForward=!1,t.studentEventLists=[],t.$on(s.CHANGE_DAY,function(e,n){l.changeDay(n),t.animateForward=n>0,t.changingDay=!0,i(function(){t.studentEventLists.suppressEvents=!0;var e=new Date;l.fetchStudentEvents().then(p).then(function(n){var r=(new Date).getTime()-e.getTime();i(function(){t.studentEventLists=n,t.changingDay=!1},Math.max(0,500-r),!0)})},0,!0)}),t.getData=function(){m.afterLogin().then(function(){l.fetchStudentEvents().then(p).then(function(e){t.studentEventLists=e,2==e.length&&(t.activeStudent=e[1],t.activeStudent.active=!0)},function(t){r.error(t)})})},t.setActiveList=function(e){e&&e.isTimeAxis||(n.forEach(t.studentEventLists,function(t){t.active=t===e}),t.activeStudent=e)},t.openEvent=function(t){l.setActiveEvent(t),a.url("/event-detail")},t.toggleComplete=l.toggleCompletion}]}()}).call(e,n(10),n(12))},function(t,e,n){(function(e,n){"use strict";t.exports=function(){return["$q","$log","hsAuthService","hsCalendarService","Util",function(t,r,o,i,a){function c(){return m?t.when(m):i.getCalendarList().then(function(t){return m=t},function(e){return r.error(e),t.reject(e)})}function s(t){var e=a.safeRead(t,"extendedProperties.private.subjectId");return o.getUserData().subjects.find(function(t){return t.id===e})}function l(t){var i=e(t.start.dateTime),c=e(t.end.dateTime);return r.log("creating "+t.summary+" event"),{day:i.dayOfYear(),start:i,end:c,startMinutes:60*i.hours()+i.minutes(),endMinutes:60*c.hours()+c.minutes(),fmtTime:i.format("hh:mma"),subject:s(t),completion:a.safeRead(t,"extendedProperties.private.completion"),resource:t,editable:n.isArray(o.getUserData().students)}}function d(e,n,r){return e.updating=!0,i.patchEvent(e.resource,n,r,f,v).then(function(t){return e.resource=t,e.updating=!1,e},function(n){return e.updating=!1,t.reject(n)})}function u(t){return t?d(t,{extendedProperties:{"private":{completion:a.safeRead(t.resource,"extendedProperties.private.completion")?null:e().format()}}},!1).then(function(e){return t.completion=a.safeRead(e.resource,"extendedProperties.private.completion"),t}):void 0}function h(){return c().then(function(e){var r=t.defer(),a={},c=0,s=o.getUserData();return n.forEach(s.students||[s],function(o){a[o.userId]=[];var s=[];n.forEach(o.calendarIDs,function(t){var n=e.items.find(function(e){return e.id===t});n&&s.push(i.getEventList(n.id,f.format(),v.format()))}),s.length&&(c++,t.all(s).then(function(t){r.notify(o.name+" data retrieved"),c--,n.forEach(t,function(t){n.forEach(t.items,function(t){a[o.userId].push(l(t))})}),0===c&&r.resolve(a)},function(t){r.reject("Error fetching events for "+o.name+": "+t)}))}),r.promise})}var m=null,p=null,f=e().startOf("day"),v=e().endOf("day");return{fetchStudentEvents:h,changeDay:function(t){f.add("days",t),v.add("days",t)},setActiveEvent:function(t){p=t},patchEvent:d,toggleCompletion:u,getActiveEventViewState:function(){return p},getStart:function(){return f},getEnd:function(){return v}}}]}()}).call(e,n(10),n(12))},function(t){"use strict";t.exports=function(){return["$scope","$rootScope","$log","$mdSidenav","ScheduleModel","Events","hsAuthService","authEvents",function(t,e,n,r,o,i,a,c){t.signed_in=!1,t.$on(c.AUTHENTICATION_CHANGE,function(e,n){t.signed_in=n,t.profile=a.getProfile(),t.profileImgSrc=t.profile?t.profile.image.url.replace(/sz=\d+/,"sz=80"):null}),t.logout=a.logout,t.toggleNav=function(){r("left").toggle()}}]}()},function(t,e,n){t.exports=n.p+"components/auth/login.html"},function(t,e,n){t.exports=n.p+"components/auth/profile.html"},function(t,e,n){t.exports=n.p+"components/schedule/event-detail.html"},function(t,e,n){t.exports=n.p+"components/schedule/schedule.html"}]);