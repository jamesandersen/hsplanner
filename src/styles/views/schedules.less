@schedule-name-height: 55px;
@student-schedule-width: 250px;
@non-student-col-width: 118px;
@student-schedule-margin: 7px;
@scrollbar-width: 16px;
@schedule-width: ((3 * @student-schedule-width) + (8 * @student-schedule-margin) + @non-student-col-width + @scrollbar-width);
@grid-line-z-index: 100;
@event-z-index: 200;

.schedule {
    position: relative;
    .box-sizing(border-box);
    margin-top: -@schedule-name-height - 10px;
    padding-top: @schedule-name-height + 10px;
    height: 100%;
    max-width: @schedule-width;
    margin: 0 auto;

    &.active-student {
        .student-schedule:not(.active), .student-schedule-header:not(.active) {
            display: none;
        }

        .student-schedule.active, .student-schedule-header.active {
            width: 100%;

            i.fa.fa-times { display: inline; }
        }
    }
}

.header-container {
    margin-top: -@schedule-name-height;
    height: @schedule-name-height;
    max-width: @schedule-width;
}

.event-container {
    -webkit-perspective: 800;
    height: 100%;
    max-width: @schedule-width;
    overflow-y: auto;
    overflow-x: hidden;
}

.student-schedule, .student-schedule-header {
    float: left;
    .box-sizing(border-box);
    margin: 0px @student-schedule-margin 0px @student-schedule-margin;
    padding-right: 8px;
    width: @student-schedule-width;
    border: solid 1px #BBB;
    position: relative;
    background-color: @paper-color;
    .box-shadow(0px 0px 5px 0px #333);

    &.non-student {
        background-color: transparent;
        color: @gray-dark;
        .box-shadow(none);
        border: none;
        width: @non-student-col-width;
    }
}

.student-schedule-header {
    height: @schedule-name-height;
    div.list-summary {
        text-align: right;
        text-transform: uppercase;
        color: @gray;
    }

    h3.name {
        font-size: 2.8rem;
        height: @schedule-name-height;
        width: 100%;
        text-align: center;
        line-height: @schedule-name-height;
        cursor: pointer;
        margin-top: 0px;
        margin-bottom: 0px;
        &:hover {
            color: @brand-primary;
        }

        i.fa { display: none; }
    }

    &.non-student {

        padding-top: 8px;
        h3.name {
            line-height: 2rem;
            cursor: default;
            text-align: right;
            i[class*='fa-angle-'] {
                display: inline;
                cursor: pointer;
                &:hover {
                    color: @brand-primary;
                }
            }

            &:hover { color: @gray; }
        }
    }
}

.student-schedule {
    height: 120%;

    &.active {
        background-color: @brand-secondary;

        h3.name { color: @brand-primary; }
    }

    .event {
        border: solid 1px #999;
        margin: 3px 2px;
        padding: 2px;
        color: white;
        background-color: #4bbaff;
        position: absolute;
        left: 0px;
        right: 0px;
        z-index: @event-z-index;

        .fa-cog { float: right; cursor: pointer; }
    }

    &.non-student {
        br, b { display: none; }
        border: solid 0px #BBB;

        .fa-cog { display: none; }

        .event {
            background-color: transparent;
            color: @gray;
            text-align: right;
            border: none;
            position: absolute;

            &:before {
                content: '';
                background-color: lighten(@gray, 50%);
                width: @schedule-width - @scrollbar-width - @student-schedule-margin;
                height: 1px;
                position: absolute;
                left: 0px;
                top: 0px;
                z-index: @grid-line-z-index;
            }
        }
    }
}

@media screen and (max-width: @schedule-width) {
    .header-container, .event-container, .schedule {
        width: 100%;
    }

    .student-schedule, .student-schedule-header {
        float: none;
        width: 100%;
        height: auto;
        .event {
            display: none;
        }

        &.active .event{
            display: block;
        }

        &.non-student {
            display: none;
        }
    }
}

//=======  event top offsets ==========
@blocks: 48;
@pixelsPerFifteenMin: 25px;

.generate-time-classes(24);

.generate-time-classes(@n, @i: 0) when (@i =< @n) {
    @time: @i * 15;
    .duration-@{time} { height: @i * @pixelsPerFifteenMin; }
    .toffset-@{i} { top: (@i * @pixelsPerFifteenMin); }
    .generate-time-classes(@n, (@i + 1));
}
